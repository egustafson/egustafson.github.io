<!DOCTYPE html>
<html lang="en"
>
<head>
    <title>MediaWiki with Lighttpd & SQLite on Ubuntu - Stuff I've Figured Out</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://egustafson.github.io/mediawiki-lighttpd-sqlite.html">

        <meta name="author" content="Eric Gustafson" />
        <meta name="keywords" content="lighttpd,sqlite,mediawiki,wiki" />
        <meta name="description" content="In rebuilding an old, and rarely used server that runs MediaWiki I reconsidered how to install all of the dependencies that MediaWiki sits on top of. My goal was to choose lightweight components. The only thing that would run on this web server would be MediaWiki, and the wiki would ..." />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://egustafson.github.io/theme/css/bootstrap.flatly.min.css" type="text/css"/>
    <link href="https://egustafson.github.io/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://egustafson.github.io/theme/css/pygments/native.css" rel="stylesheet">
        <link href="https://egustafson.github.io/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="https://egustafson.github.io/theme/css/style.css" type="text/css"/>

        <link href="https://egustafson.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Stuff I've Figured Out ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://egustafson.github.io/" class="navbar-brand">
Stuff I've Figured Out            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li class="active">
                            <a href="https://egustafson.github.io/category/howto.html">Howto</a>
                        </li>
                        <li >
                            <a href="https://egustafson.github.io/category/random.html">Random</a>
                        </li>
                        <li >
                            <a href="https://egustafson.github.io/category/review.html">Review</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="https://egustafson.github.io/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://egustafson.github.io/mediawiki-lighttpd-sqlite.html"
                       rel="bookmark"
                       title="Permalink to MediaWiki with Lighttpd & SQLite on Ubuntu">
                        MediaWiki with Lighttpd <span class="amp">&amp;</span> SQLite on&nbsp;Ubuntu
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2012-02-18T00:00:00"> Sat 18 February 2012</time>
    </span>



<span class="label label-default">Tags</span>
	<a href="https://egustafson.github.io/tag/lighttpd.html">lighttpd</a>
        /
	<a href="https://egustafson.github.io/tag/sqlite.html">sqlite</a>
        /
	<a href="https://egustafson.github.io/tag/mediawiki.html">mediawiki</a>
        /
	<a href="https://egustafson.github.io/tag/wiki.html">wiki</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>In rebuilding an old, and rarely used server that runs <a class="reference external" href="https://www.mediawiki.org/">MediaWiki</a> I
reconsidered how to install all of the dependencies that MediaWiki
sits on top of. My goal was to choose lightweight components. The only
thing that would run on this web server would be MediaWiki, and the
wiki would be lightly used. I concluded the following components were
likely more suitable choices than the defaults MediaWiki and/or
Ubuntu’s package system&nbsp;used.</p>
<ul class="simple">
<li><a class="reference external" href="http://www.lighttpd.net">Lighttpd</a></li>
<li><a class="reference external" href="https://www.sqlite.org">SQLite</a></li>
</ul>
<p>The second goal was, based on my preference for Ubuntu as a
distribution, build MediaWiki on top of Ubuntu using just Ubuntu
packages, no source installation. The principal value in this is that
over time the components in use can be simply upgraded using the stock
Ubuntu package mechanisms (i.e. <code>apt-get upgrade</code>).</p>
<p>The following is the sequence I used to install MediaWiki. This
installation guide is based on Ubuntu Oneiric&nbsp;(11.10).</p>
<div class="section" id="install-prerequisites">
<h2>Install&nbsp;Prerequisites</h2>
<p>(note, <cite>sudo</cite> is generally required, but dropped from the commands&nbsp;below)</p>
<div class="highlight"><pre>apt-get install lighttpd
apt-get install php5-cgi php5
</pre></div>
<p>next, edit <tt class="docutils literal">/etc/php5/cgi/php.ini</tt> to enable php5 in lighttpd and
uncomment the&nbsp;line:</p>
<pre class="literal-block">
`cgi.fix_pathinfo=1`
</pre>
<p>Then enable the fastcgi configuration in&nbsp;lighttpd:</p>
<div class="highlight"><pre>lighttpd-enable-mod fastcgi
lighttpd-enable-mod fastcgi-php
service lighttpd force-reload
</pre></div>
<p>Install&nbsp;php5-sqlite:</p>
<div class="highlight"><pre>apt-get install php5-sqlite
service lighttpd restart
</pre></div>
<p>Install optional extras that MediaWiki will take advantage&nbsp;of:</p>
<div class="highlight"><pre>apt-get install imagemagick php5-gd php5-cli
service lighttpd restart
</pre></div>
</div>
<div class="section" id="install-mediawiki">
<h2>Install&nbsp;MediaWiki</h2>
<p>Note: The MediaWiki package in Ubuntu (Oneiric) has &#8216;mysql-server’
listed as a ’<em>recommends</em>’ dependency. This has the implication that
unless explicitly forced to <strong>not</strong> include the dependency, it will be
included as part of the package install. This is accomplished with the
<tt class="docutils literal"><span class="pre">--no-install-recommends</span></tt>.</p>
<div class="highlight"><pre>apt-get --no-install-recommends install mediawiki
apt-get install mediawiki-math
</pre></div>
</div>
<div class="section" id="configure-mediawiki">
<h2>Configure&nbsp;MediaWiki</h2>
<p>Add the following to lighttpd&#8217;s&nbsp;configuration:</p>
<div class="highlight"><pre>alias.url += ( &quot;/wiki&quot; =&gt; &quot;/var/lib/mediawiki/&quot; )
</pre></div>
<p>restart lighttpd to effect the configuration&nbsp;change:</p>
<div class="highlight"><pre>service lighttpd restart
</pre></div>
<p>Create a data directory for MediaWiki to store the SQLite database&nbsp;in:</p>
<div class="highlight"><pre>mkdir /var/lib/mediawiki-data
chown www-data.www-data /var/lib/mediawiki-data
</pre></div>
<p>Browse to the wiki root: <tt class="docutils literal"><span class="pre">http://hostname/wiki</span></tt> and complete
configuration through the web&nbsp;browser.</p>
<blockquote>
&#8230;</blockquote>
<p>Following browser configuration, copy the generated configuration to
the permanent location, as specified on the final browser&nbsp;page:</p>
<div class="highlight"><pre>cp /var/lib/mediawiki/config/LocalSettings.php /etc/mediawiki/LocalSettings.php
chown www-data /etc/mediawiki/LocalSettings.php
chmod 600 /etc/mediawiki/LocalSettings.php
rm -rf /var/lib/mediawiki/config
</pre></div>
<p>Done.</p>
</div>

            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'egustafson'; // required: replace example with your forum shortname

                    var disqus_identifier = 'mediawiki-lighttpd-sqlite';
                var disqus_url = 'https://egustafson.github.io/mediawiki-lighttpd-sqlite.html';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="http://twitter.com/elfwerks"><i class="fa fa-twitter-square fa-lg"></i> twitter</a></li>
                <li class="list-group-item"><a href="http://delicious.com/elfwerks"><i class="fa fa-delicious-square fa-lg"></i> delicious</a></li>
                <li class="list-group-item"><a href="http://www.linkedin.com/in/ericggustafson/"><i class="fa fa-linkedin-square fa-lg"></i> linkedin</a></li>
                <li class="list-group-item"><a href="https://github.com/egustafson"><i class="fa fa-github-square fa-lg"></i> github</a></li>
              </ul>
            </li>



            <li class="list-group-item"><a href="https://egustafson.github.io/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group list-inline tagcloud" id="tags">
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/blog.html">
                            blog
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/cgp.html">
                            CGP
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/collectd.html">
                            collectd
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/cygwin.html">
                            cygwin
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/install.html">
                            install
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://egustafson.github.io/tag/lighttpd.html">
                            lighttpd
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/mediawiki.html">
                            mediawiki
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/monitoring.html">
                            monitoring
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/oscon.html">
                            OSCON
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/pelican.html">
                            pelican
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/sqlite.html">
                            sqlite
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/sync.html">
                            sync
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/syncthing.html">
                            syncthing
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/trip-report.html">
                            trip report
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/ubuntu.html">
                            ubuntu
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://egustafson.github.io/tag/wiki.html">
                            wiki
                        </a>
                    </li>
                </ul>
            </li>
    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://krow.net/" target="_blank">
                Brian Aker
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://linuxjedi.co.uk/" target="_blank">
                Andrew Hutchings
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://patg.net/" target="_blank">
                Patrick Galbraith
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://askyazz.com/" target="_blank">
                Yazz Atlas
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2015 Eric Gustafson
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://egustafson.github.io/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://egustafson.github.io/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://egustafson.github.io/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'egustafson'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
</body>
</html>